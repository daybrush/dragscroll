/*
Copyright (c) 2019 Daybrush
name: @scena/dragscroll
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/dragscroll.git
version: 0.3.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@scena/event-emitter"),require("@daybrush/utils")):"function"==typeof define&&define.amd?define(["@scena/event-emitter","@daybrush/utils"],e):(t=t||self).DragScroll=e(t.EventEmitter,t.utils)}(this,function(t,_){"use strict";var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function P(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}return function(e){function t(){this.constructor=i}var i,r;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}s(i=n,r=e),i.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var o=n.prototype;return o.dragStart=function(t,e){var i=e.container.getBoundingClientRect(),r=i.top,n=i.left,o=i.width,s=i.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:n,width:o,height:s}},o.drag=function(t,e){var i=this,r=t.clientX,n=t.clientY,o=e.container,s=e.threshold,c=void 0===s?0:s,u=e.throttleTime,a=void 0===u?0:u,f=e.getScrollPosition,l=void 0===f?P:f,h=this.startRect,p=this.startPos,d=_.now(),v=Math.max(a+this.prevTime-d,0),m=[0,0];if(h.top>n-c?(p[1]>h.top||n<p[1])&&(m[1]=-1):h.top+h.height<n+c&&(p[1]<h.top+h.height||n>p[1])&&(m[1]=1),h.left>r-c?(p[0]>h.left||r<p[0])&&(m[0]=-1):h.left+h.width<r+c&&(p[0]<h.left+h.width||r>p[0])&&(m[0]=1),clearTimeout(this.timer),!m[0]&&!m[1])return!1;if(0<v)return this.timer=window.setTimeout(function(){i.drag(t,e)},v),!1;this.prevTime=d;var g=l({container:o,direction:m});this.trigger("scroll",{container:o,direction:m,inputEvent:t});var y=l({container:o,direction:m}),w=y[0]-g[0],T=y[1]-g[1];return!(!w&&!T)&&(this.trigger("move",{offsetX:m[0]?w:0,offsetY:m[1]?T:0,inputEvent:t}),a&&(this.timer=window.setTimeout(function(){i.drag(t,e)},a)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},n}(t)});
//# sourceMappingURL=dragscroll.min.js.map
