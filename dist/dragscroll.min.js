/*
Copyright (c) 2019 Daybrush
name: @scena/dragscroll
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/dragscroll.git
version: 1.0.3
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).DragScroll=e()}(this,function(){"use strict";var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t){return t&&"object"==typeof t}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function T(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}return function(e){function t(){this.constructor=n}var n,r;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}s(n=i,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var o=i.prototype;return o.dragStart=function(t,e){var n=e.container,r=0,i=0,o=0,s=0;if(n===document.body)o=window.innerWidth,s=window.innerHeight;else{var c=n.getBoundingClientRect();r=c.top,i=c.left,o=c.width,s=c.height}this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:i,width:o,height:s}},o.drag=function(t,e){var n=this,r=t.clientX,i=t.clientY,o=e.container,s=e.threshold,c=void 0===s?0:s,f=e.throttleTime,u=void 0===f?0:f,a=e.getScrollPosition,l=void 0===a?T:a,h=this.startRect,v=this.startPos,d=Date.now?Date.now():(new Date).getTime(),p=Math.max(u+this.prevTime-d,0),m=[0,0];if(h.top>i-c?(v[1]>h.top||i<v[1])&&(m[1]=-1):h.top+h.height<i+c&&(v[1]<h.top+h.height||i>v[1])&&(m[1]=1),h.left>r-c?(v[0]>h.left||r<v[0])&&(m[0]=-1):h.left+h.width<r+c&&(v[0]<h.left+h.width||r>v[0])&&(m[0]=1),clearTimeout(this.timer),!m[0]&&!m[1])return!1;if(0<p)return this.timer=window.setTimeout(function(){n.drag(t,e)},p),!1;this.prevTime=d;var g=l({container:o,direction:m});this.trigger("scroll",{container:o,direction:m,inputEvent:t});var y=l({container:o,direction:m}),w=y[0]-g[0],_=y[1]-g[1];return!(!w&&!_)&&(this.trigger("move",{offsetX:m[0]?w:0,offsetY:m[1]?_:0,inputEvent:t}),u&&(this.timer=window.setTimeout(function(){n.drag(t,e)},u)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},i}(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(o(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(o(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var i=function(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}(r,function(t){return t.listener===e});-1<i&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var r=this;void 0===n&&(n={});var t=this._events[e];if(!e||!t)return!0;var i=!1;return n.eventType=e,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r}(t).forEach(function(t){t.listener(n),t.once&&r.off(e,t.listener)}),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(i({listener:e},n))},t}())});
//# sourceMappingURL=dragscroll.min.js.map
